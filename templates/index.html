<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Seoul Crime Dashboard</title>

   {# Bootstrap / Keen / dc.css #}
  <link rel="stylesheet" href="{{ url_for('static', filename='lib/css/bootstrap.min.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='lib/css/keen-dashboards.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='lib/css/dc.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/custom.css') }}">


  <!-- 레이아웃 / 차트용 커스텀 스타일 -->
  <style>
    body {
      padding-top: 60px;
    }
    .navbar-brand {
      font-weight: 600;
    }
    .panel {
      border-radius: 4px;
      box-shadow: 0 1px 2px rgba(0,0,0,.05);
    }
    .panel-heading {
      font-weight: 600;
    }

    /* ==== 차트 컨테이너 높이 확보 (이게 중요!) ==== */
    #year-chart,
    #crime-rate-chart {
      /* js에서 height를 주긴 하지만, 박스가 너무 좁으면
         svg가 찌그러져 보이거나 숨는 느낌이 날 수 있어서 최소 높이 확보 */
      min-height: 250px;
    }

    #seoul-map {
      /* geoChoropleth는 컨테이너가 너무 작으면 안 보이는 것처럼 느껴질 수 있어서 */
      min-height: 450px;
      fill-opacity: 1 !important;
    }

    /* SVG가 패널 안에서 꽉 차게 */
    .dc-chart svg {
      width: 100%;
      height: 100%;
    }

    /* 큰 숫자 메트릭용 */
    .metric {
      text-align: center;
      padding: 40px 10px;
      font-family: "Helvetica Neue", Arial, sans-serif;
    }
    .metric-value {
      font-size: 64px;
      font-weight: 700;
      line-height: 1;
    }
    .metric-label {
      margin-top: 10px;
      font-size: 18px;
      color: #777;
    }
  </style>
</head>

<body>

  <!-- 상단 네비게이션 바 -->
  <nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container-fluid">
      <div class="navbar-header">
        <a class="navbar-brand" href="#">Seoul Crime Dashboard</a>
      </div>
    </div>
  </nav>

  <div class="container-fluid">

    <div class="row">
      <!-- 왼쪽: year + histogram (세로로 두 개 쌓기) -->
      <div class="col-sm-5 col-md-6">

        <div class="panel panel-default">
          <div class="panel-heading">Crime Records by Year</div>
          <div class="panel-body">
            <div id="year-chart" class="dc-chart"></div>
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading">Crime Rate Distribution</div>
          <div class="panel-body">
            <div id="crime-rate-chart" class="dc-chart"></div>
          </div>
        </div>

      </div>

      <!-- 오른쪽: 지도(위) + total(아래) -->
      <div class="col-sm-6 col-md-6">

        <div class="panel panel-default">
          <div class="panel-heading">Crime Rate by District</div>
          <div class="panel-body">
            <div id="seoul-map" class="dc-chart"></div>
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading">Total Records</div>
          <div class="panel-body">
            <div class="metric">
              <div id="total-count-nd" class="metric-value"></div>
              <div class="metric-label">Total crime records in dataset</div>
            </div>
          </div>
        </div>

      </div>
    </div>

  </div>




  <!-- JS 라이브러리들: 순서 중요! -->
  <script src="https://d3js.org/d3.v3.min.js"></script>
  <script src="https://d3js.org/queue.v1.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crossfilter/1.3.12/crossfilter.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/dc/2.1.8/dc.min.js"></script>

  <!-- 너가 만든 dc 코드 -->
  <script src="{{ url_for('static', filename='js/graphs.js') }}"></script>

</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Seoul Crime Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- ===== Bootstrap & Keen CSS (CDN 기반: 깨질 확률 0%) ===== -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <link rel="stylesheet" href="{{ url_for('static', filename='lib/css/keen-dashboards.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='lib/css/dc.css') }}">

  <!-- ===== Custom CSS ===== -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/custom.css') }}">

  <!-- ===== Dashboard Layout Styling ===== -->
  <style>
    body { padding-top: 60px; }

    .navbar-brand { font-weight: 600; }

    .panel {
      border-radius: 4px;
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
    }
    .panel-heading { font-weight: 600; }

    #year-chart,
    #crime-rate-chart {
      min-height: 250px;
    }

    #seoul-map svg path {
      stroke: #111111ff;
      stroke-width: 0.5;
      min-height: 350px;
      height: 350px;
      fill-opacity: 1 !important;
    }

    .map-legend {
      margin-top: 8px;
      display: flex;
      flex-wrap: wrap;
      font-size: 11px;
      line-height: 1.2;
    }

    .map-legend-title {
      width: 100%;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .legend-item {
      display: flex;
      align-items: center;
      margin-right: 10px;
      margin-bottom: 4px;
    }

    .legend-swatch {
      width: 14px;
      height: 14px;
      margin-right: 4px;
      border: 1px solid #ccc;
    }

    .dc-chart svg {
      width: 100%;
      height: 100%;
    }



    .metric {
      text-align: center;
      padding: 40px 10px;
      font-family: "Helvetica Neue", Arial, sans-serif;
    }
    .metric-value {
      font-size: 64px;
      font-weight: 700;
    }
    .metric-label {
      margin-top: 10px;
      font-size: 18px;
      color: #777;
    }

    #metric-selector .btn {
      background: #ffffff !important;
      color: #333 !important;
      border-color: #ccc !important;
    }

    #metric-selector .btn.active {
      background: #d9d9d9 !important;  /* 선택됨 = 회색 */
      color: #111 !important;
      border-color: #999 !important;
    }
  </style>
</head>

<body>

  <!-- ===== Navigation Bar ===== -->
  <nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container-fluid">
      <div class="navbar-header">
        <a class="navbar-brand">Seoul Crime Dashboard</a>
      </div>
    </div>
  </nav>

  <!-- ===== Main Container ===== -->
  <div class="container-fluid" style="margin-bottom: 10px;">
    <div id="metric-selector" class="btn-group btn-group-sm">
      <button id="metric-btn-crime_rate"
              class="btn btn-default active"
              data-metric="crime_rate"
              onclick="setMetric('crime_rate')">
        Crime
      </button>

      <button id="metric-btn-park_area"
              class="btn btn-default"
              data-metric="park_area"
              onclick="setMetric('park_area')">
        Park Area
      </button>

      <button id="metric-btn-gdp"
              class="btn btn-default"
              data-metric="gdp"
              onclick="setMetric('gdp')">
        GDP
      </button>
    </div>


      <!-- ===== Left Column (Year + Histogram) ===== -->
      <div class="col-md-6">

        <div class="panel panel-default">
          <div class="panel-heading">Crime Records by Year</div>
          <div class="panel-body">
            <div id="year-chart" class="dc-chart"></div>
            </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading">Metric Disbribution</div>
          <div class="panel-body">
            <div id="crime-rate-chart" class="dc-chart"></div>
          </div>
        </div>

      </div>

      <!-- ===== Right Column (Map + Total Records) ===== -->
      <div class="col-md-6">

        <div class="panel panel-default">
          <div class="panel-heading">Crime Rate by District</div>
          <div class="panel-body">
            <div id="seoul-map" class="dc-chart"></div>
            <div id="map-legend" class="map-legend"></div>
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading">Total Records</div>
          <div class="panel-body">
            <div class="metric">
              <div id="total-count-nd" class="metric-value"></div>
              <div class="metric-label">Total of Selected Metric</div>
            </div>
          </div>
        </div>

      </div>

    </div>
  </div>

  <!-- ===== Scripts ===== -->
  <script src="https://d3js.org/d3.v3.min.js"></script>
  <script src="https://d3js.org/queue.v1.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crossfilter/1.3.12/crossfilter.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/dc/2.1.8/dc.min.js"></script>

  <script src="{{ url_for('static', filename='js/graphs.js') }}"></script>

</body>
</html>
